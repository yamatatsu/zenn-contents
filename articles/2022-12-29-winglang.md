---
title: "[ãƒ¡ãƒ¢] winglangã‚’èª­ã‚€"
emoji: "ğŸ“"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [devops]
published: true
---

ã“ã‚Œã‚’èª­ã‚€ã€‚

https://github.com/winglang/wing

# ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚€å‰ã«

wing ã¯è¨€èªã€SDKã€ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œç’°å¢ƒã‚’å«ã‚€ã‚¯ãƒ©ã‚¦ãƒ‰é–‹ç™ºãƒ„ãƒ¼ãƒ«ç¾¤ã§ã€AWS CDK ã®ä½œè€…ã§ã‚ã‚‹ Elad Ben ãŒä½œæˆã—ã¦ã„ã‚‹ã€‚

è¨€èªã¨ã—ã¦ã® wing (winglang ã¨ã‚‚) ã¯ã‚¯ãƒ©ã‚¦ãƒ‰æŒ‡å‘è¨€èª (Cloud Oriented Language) ã‚’åä¹—ã£ã¦ã„ã‚‹ã€‚
AWS CDK ã®ã‚ˆã†ã«ã‚¯ãƒ©ã‚¦ãƒ‰ãƒªã‚½ãƒ¼ã‚¹ã‚’å®šç¾©ã§ãã‚‹ã¨åŒæ™‚ã«ã€ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ã« FaaS ä¸Šã§å‹•ãã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã‚’è¨˜è¿°ã§ãã‚‹ã“ã¨ãŒæœ€å¤§ã®ç‰¹å¾´ã§ã‚ã‚‹ã€‚

## ã‚³ãƒ¼ãƒ‰ã‚µãƒ³ãƒ—ãƒ«

```wing
bring cloud;

let queue = new cloud.Queue(timeout: 2m);
let bucket = new cloud.Bucket();
let counter = new cloud.Counter(initial: 100);

queue.on_message(inflight (body: str): str => {
  let next = counter.inc();
  let key = "myfile-${next}.txt";
  bucket.put(key, body);
});
```

```wing
resource SafeQueue extends cloud.Queue {
  init() {
    let dlq = new cloud.Queue();

    dlq.on_message(inflight (m: str) => {
      log.error("dead-letter: ${m}");
    });

    this.add_dead_letter_queue(dlq);
  }
}
```

```wing
bring cloud;

let bucket = new cloud.Bucket();

new cloud.Function(inflight (_: str): str => {
  bucket.put("hello.txt", "world");
});
```

# ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚€

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
â”œâ”€ apps
â”‚Â Â  â”œâ”€ vscode-wing
â”‚Â Â  â”œâ”€ wing
â”‚Â Â  â”œâ”€ wing-api-checker
â”‚Â Â  â”œâ”€ wing-language-server
â”‚Â Â  â””â”€ wing-playground
â””â”€ libs
    â”œâ”€ tree-sitter-wing
    â”œâ”€ wingc
    â”œâ”€ wingii
    â””â”€ wingsdk
```

ä¾å­˜é–¢ä¿‚:

```mermaid
flowchart TB
  apps/vscode-wing --> libs/wingsdk
  apps/vscode-wing --> apps/wing-language-server
  apps/wing --> libs/wingsdk
  apps/wing-language-server --> libs/wingc
  apps/wing-language-server --> libs/tree-sitter-wing
  apps/wing-playground --> libs/wingsdk
  libs/wingc --> libs/tree-sitter-wing
  libs/wingc --> libs/wingii
  libs/wingc --Rustã‚³ãƒ¼ãƒ‰ã‹ã‚‰å‚ç…§ã—ã¦ã„ã‚‹--> libs/wingsdk
  libs/wingsdk --> apps/wing-api-checker
```

- **apps/vscode-wing**
  - TS è£½
  - wing ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹ç™ºã™ã‚‹ãŸã‚ã® vscode extension
  - ç¾åœ¨ã®æ©Ÿèƒ½:
    - Syntax highlighting
- **apps/wing**
  - TS è£½
  - CLI ãƒ„ãƒ¼ãƒ«
  - subcommands:
    - run: wing ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ï¼ˆwing app ã®ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œç’°å¢ƒï¼‰ã‚’èµ·å‹•ã™ã‚‹
    - it: run ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹
    - compile: wing application ã‚’ terraform ã‚„ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œç”¨ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹ã€‚
    - upgrade: wing CLI è‡ªèº«ã‚’æœ€æ–°åŒ–ã™ã‚‹
- **apps/wing-api-checker**
  - TS è£½
  - wingsdk ã®ã‚³ãƒ¼ãƒ‰ãŒ JSII ã®ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã«å€£ã£ã¦ã„ã‚‹ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ CLI ãƒ„ãƒ¼ãƒ«ï¼Ÿ
- **apps/wing-language-server**
  - Rust è£½
  - TODO: æ©Ÿèƒ½ã‚’èª­ã¿ãŸã„
- **apps/wing-playground**
  - winglang ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ä½“é¨“ã§ãã‚‹ web app
  - wingc ã® wasm ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§å‹•ã‹ã—ã¦ã‚‹ã£ã½ã„
- **libs/tree-sitter-wing**
  - tree-sitter ã‚’ç”¨ã„ã¦ winglang ã‚’ Concrete Syntax Tree ã«å¤‰æ›ã™ã‚‹
    - Concrete Syntax Tree ã¯ language server ã§ä½¿ã‚ã‚Œã‚‹
  - https://github.com/tree-sitter/tree-sitter
- **libs/wingc**
  - Rust è£½
  - winglang ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©
  - wingsdk ã§ç”Ÿæˆã•ã‚Œã‚‹ JSII æˆæœç‰©ã‚’ wingii ã‚’ç”¨ã„ã¦ Rust ã‚³ãƒ¼ãƒ‰ã¨ã—ã¦è§£é‡ˆã™ã‚‹
- **libs/wingii**
  - Rust è£½
  - This crate generates typed Rust structs from the latest version JSII JsonSchema specification. It then aims to offer API to interact with JSII modules outside of Wing compiler's reach. Currently it's basic JSII reflection only.
  - JSII JsonSchema ä»•æ§˜ã‹ã‚‰ Rust ã®ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã€Wing ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã®æ‰‹ã®å±Šã‹ãªã„ã¨ã“ã‚ã§ JSII ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨å¯¾è©±ã™ã‚‹ãŸã‚ã® API ã‚’æä¾›ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã‚‹ã€‚ç¾åœ¨ã¯ã€åŸºæœ¬çš„ãª JSII ã®ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®ã¿å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹
- **libs/wingsdk**
  - TS è£½
  - winglang å†…ã§`bring`ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ä½¿ã£ã¦åˆ©ç”¨ã•ã‚Œã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç¾¤ã€‚
  - TODO: winglang å†…ã§ä½¿ã‚ã‚Œã‚‹ã¨ãã¯å‹ã ã‘å‚ç…§ã—ã¦ã„ã‚‹ã®ã‹ãªã€‚
  - TODO: top level ã‹ã‚‰ã‚‚ inflight ã‹ã‚‰ã‚‚å‘¼ã³å‡ºã•ã‚Œã‚‹å·¥å¤«ãŒã‚ã£ãŸã‚Šã™ã‚‹ã®ã‹ãªã€‚
  - TODO: `cloud agnostic`ã‚’è¬³ã£ã¦ã„ã‚‹ã€‚ãã‚Œã¯ã—ã‚“ã©ã„ã‚„ã‚ã€‚ã€‚ã¨æ€ã£ã¦ã—ã¾ã†ãªã€‚
